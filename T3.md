给定一二分图，左侧每个点会向右侧连续的一段点连边，每个点有权值$1$；现请你给每个点一个权值$2$，对于一个点，如果所有与他相连的点的权值$2$都$<$他本身的权值$2$，则不会被选择，否则会；最大化被选择点的权值$1$的平均值

没有被选择点集一定是个独立集$u$，且只要找到一个独立集，一定存在一种权值$2$的分配使且仅使该独立集没有被选择，此时的平均值$=\frac{sum-\sum\limits_{i\in u} a[i]}{n+m-|u|}$


考虑一个左侧的点作为独立集中的一个点，当且仅当不存在右边的被选点在其连边区间内，于是对右侧点设$dp[i]$表示考虑到右侧第$i$个点且选$i$的最大权值，$dp[i]=max_{j=1}^{i-1}\{dp[j]+\sum\limits_{k}^{j<l[k]~\&~r[k]<i}a[k]\}$，考虑$i$单增的时候，将所有的连边区间按右端点排序，后一个条件恒满足，也就是说我们可以在$i$处将$a[k]$的值直接加在$dp[j]$上（$r[k]==i$，$j<l[k]$），则此后的$dp[i]=max_{j=1}^{i-1}dp[j]$，维护dp数组的区间加法和区间求最大值，用线段树即可